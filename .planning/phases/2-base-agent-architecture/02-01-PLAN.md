---
phase: 02-base-agent-architecture
plan: 01
type: execute
---

<objective>
Install core dependencies and enhance BaseAgent with MCP client capabilities.

Purpose: Establish the foundation libraries and upgrade BaseAgent to support MCP tool integration.
Output: Working environment with all dependencies, enhanced BaseAgent with MCP client, structured logging.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/2-base-agent-architecture/2-RESEARCH.md
@.planning/phases/2-base-agent-architecture/2-CONTEXT.md
@osint_system/agents/base_agent.py
@osint_system/config/logging.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install core agent architecture dependencies</name>
  <files>requirements.txt</files>
  <action>Add langchain, langgraph, mcp, aiopubsub, and structlog to requirements.txt. Use latest stable versions except mcp which should be 1.25.0 as per research. Ensure pydantic is >=2.0 for compatibility. Run uv pip install -r requirements.txt to install. Avoid installing langchain-community initially - we'll add specific integrations as needed.</action>
  <verify>uv pip list | grep -E "langchain|langgraph|mcp|aiopubsub|structlog" shows all packages installed</verify>
  <done>All 5 core packages installed successfully, no import errors when testing</done>
</task>

<task type="auto">
  <name>Task 2: Enhance BaseAgent with MCP client integration</name>
  <files>osint_system/agents/base_agent.py</files>
  <action>Enhance BaseAgent to include optional MCP client initialization. Add mcp_enabled flag and mcp_server_command parameters. In __init__, conditionally create MCP client session if enabled. Add async context manager support for proper MCP session lifecycle. Keep backward compatibility - MCP should be optional. Use the pattern from RESEARCH.md for MCP client setup with stdio_client.</action>
  <verify>python -c "from osint_system.agents.base_agent import BaseAgent; print('BaseAgent imports successfully')"</verify>
  <done>BaseAgent has MCP client support, maintains backward compatibility, no import errors</done>
</task>

<task type="auto">
  <name>Task 3: Set up structured logging with context</name>
  <files>osint_system/utils/logging.py</files>
  <action>Create structured logging setup using structlog. Configure with JSON renderer for production, console for development (based on LOG_FORMAT setting). Add processors for timestamps, log level, and context binding. Include agent_id and agent_name automatic binding. Set up correlation ID for tracing agent interactions. Use structlog.get_logger() pattern for consistency.</action>
  <verify>python -c "from osint_system.utils.logging import get_structured_logger; logger = get_structured_logger('test'); logger.info('test')" outputs structured log</verify>
  <done>Structured logging configured, context binding works, output format matches LOG_FORMAT setting</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `uv pip list` shows all required packages
- [ ] `python -m osint_system.agents.base_agent` runs without import errors
- [ ] Structured logging outputs in correct format
- [ ] No Python syntax errors or type errors
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- BaseAgent maintains backward compatibility
- MCP integration is optional and clean
</success_criteria>

<output>
After completion, create `.planning/phases/2-base-agent-architecture/02-01-SUMMARY.md`:

# Phase 2 Plan 1: Dependencies & Enhanced BaseAgent Summary

**[One-liner about what was accomplished]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `file.py` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 02-02-PLAN.md
</output>