---
phase: 04-news-crawler
plan: 02
type: execute
---

<objective>
Integrate RSS feeds and news APIs to provide multiple data sources for comprehensive coverage.

Purpose: Connect NewsFeedAgent to real news sources through RSS feeds and NewsAPI for broad content acquisition.
Output: Working integration with configurable news sources and API clients.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-news-crawler/04-CONTEXT.md
@.planning/phases/04-news-crawler/04-RESEARCH.md
@.planning/phases/04-news-crawler/04-01-SUMMARY.md
@osint_system/agents/crawlers/newsfeed_agent.py
@osint_system/config/settings.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure RSS feed sources with mixed authority levels</name>
  <files>osint_system/config/news_sources.py</files>
  <action>Create news source configuration with mainstream (BBC, Reuters, AP), specialist (Defense One, War on the Rocks), and alternative sources (local outlets, independent journalists). Include RSS feed URLs, source credibility scores, geographic focus, and rate limits per source. Structure as dictionary with source metadata including authority level (1-5), topic specialization, and update frequency. Avoid paywalled sources initially (WSJ, FT, etc).</action>
  <verify>python -c "from osint_system.config.news_sources import NEWS_SOURCES; assert len(NEWS_SOURCES) > 10; print(f'{len(NEWS_SOURCES)} sources configured')"</verify>
  <done>News sources configuration with 10+ feeds of mixed authority levels</done>
</task>

<task type="auto">
  <name>Task 2: Implement NewsAPI client with search capabilities</name>
  <files>osint_system/agents/crawlers/sources/api_crawler.py</files>
  <action>Create NewsAPIClient using httpx AsyncClient for everything endpoint. Implement search_articles method with query, date range, sources, and language parameters. Add free tier rate limiting (100 req/day = ~4/hour). Include result pagination handling. Parse API responses into normalized article format matching RSS structure. Add API key configuration from environment variables. Include error handling for quota exceeded and invalid API key responses.</action>
  <verify>python -c "from osint_system.agents.crawlers.sources.api_crawler import NewsAPIClient; import os; os.environ['NEWS_API_KEY'] = 'test'; client = NewsAPIClient(); print('API client ready')"</verify>
  <done>NewsAPI client with search and rate limiting implemented</done>
</task>

<task type="auto">
  <name>Task 3: Create unified source fetcher with RSS-first strategy</name>
  <files>osint_system/agents/crawlers/newsfeed_agent.py</files>
  <action>Update NewsFeedAgent to integrate RSS and API sources. Implement fetch_investigation_data method that takes investigation query and fetches from configured RSS feeds first (more reliable), then supplements with NewsAPI search for additional coverage. Normalize all results to common Article format with source, title, url, published_date, content, authors, and metadata fields. Implement source rotation to avoid hitting single source too frequently. Add investigation context to guide relevance.</action>
  <verify>python -c "from osint_system.agents.crawlers.newsfeed_agent import NewsFeedAgent; agent = NewsFeedAgent(); print('Agent can fetch from multiple sources')"</verify>
  <done>Unified fetcher with RSS-first, API fallback strategy</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] RSS feeds from config can be parsed successfully
- [ ] NewsAPI client handles rate limits gracefully
- [ ] Unified fetcher returns articles from both RSS and API
- [ ] Source metadata preserved in all articles
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Multiple source types integrated
- RSS and API sources working
- Investigation-driven fetching ready
</success_criteria>

<output>
After completion, create `.planning/phases/04-news-crawler/04-02-SUMMARY.md`:

# Phase 4 Plan 2: RSS and News API Integration Summary

**Connected NewsFeedAgent to real news sources through RSS feeds and NewsAPI**

## Accomplishments

- Configured 10+ news sources with mixed authority levels
- NewsAPI client with search and pagination
- RSS-first strategy with API supplementation
- Unified fetcher for investigation-driven queries
- Source rotation and rate limiting

## Files Created/Modified

- `osint_system/config/news_sources.py` - Source configurations
- `osint_system/agents/crawlers/sources/api_crawler.py` - NewsAPI client
- `osint_system/agents/crawlers/newsfeed_agent.py` - Enhanced with multi-source fetching

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 04-03-PLAN.md (Relevance filtering and metadata extraction)
</output>